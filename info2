流程

1 上传文件
2 运行 before_create 中的 create_error_report_path
  文件处理，委托给Upload的类实例（子流程1）
  根据类实例处理的结果，赋予出错报告路径


子流程1：文件处理

1 处理类得到一个model
2 根据model得到文件
3 处理
  整个action在一个大的transaction中
  
  逐行增加 资源的 total_size，有错误，则 资源的 error_size + 1
  有错误的数据行不处理，记录错误
  只有出现未知异常时才会回滚整个事务

  在一行数据全部为空时结束
4 完成处理后，
  如果有错误，则生成错误文件（错误文件记录出错行数，出错原因，返回错误报告路径）（子流程2），并返回地址，如果没有，则返回success


子流程2：错误文件生成

1 得到数据（二维数组）
2 填写表头
3 填写内容
4 返回地址
  






 
